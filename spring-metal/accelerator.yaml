accelerator:
  displayName: Tanzu Platform GenAi RAG application 
  description: Add GenAI RAG capabilities, using Tanzu Platform, to an existing spring Boot application
  iconUrl: data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNiAxNiI+PHBvbHlnb24gcG9pbnRzPSI3LjQyNCAwLjIyIDcuNDI0IDAuOTI1IDIuNjEgMy4yNDMgMi4wNTcgMi44MDMgNy40MjQgMC4yMiIgZmlsbD0iIzAwYzFkNSIvPjxwb2x5Z29uIHBvaW50cz0iMTMuNzgyIDIuODAzIDEzLjIzIDMuMjQzIDguNDE2IDAuOTI1IDguNDE2IDAuMjIgMTMuNzgyIDIuODAzIiBmaWxsPSIjMDBjMWQ1Ii8+PHBvbHlnb24gcG9pbnRzPSIxNS41MjIgOC40ODggMTQuODcgOC40ODggMTMuODUgNC4wMTggMTQuNDAxIDMuNTggMTUuNTIyIDguNDg4IiBmaWxsPSIjMWQ0MjhhIi8+PHBvbHlnb24gcG9pbnRzPSIxLjk5IDQuMDE4IDAuODAxIDkuMjI4IDAuMTEzIDkuMzg2IDEuNDM5IDMuNTggMS45OSA0LjAxOCIgZmlsbD0iIzFkNDI4YSIvPjxwb2x5Z29uIHBvaW50cz0iNC4zNTMgMTQuMzc0IDQuMDQ3IDE1LjAxIDAuMzM0IDEwLjM1NCAxLjAyMSAxMC4xOTYgNC4zNTMgMTQuMzc0IiBmaWxsPSIjNzhiZTIwIi8+PHBvbHlnb24gcG9pbnRzPSI1LjI0OCAxNC44MDYgNy45ODIgMTQuODA2IDcuOTgyIDE1LjQ0MSA0Ljk0MiAxNS40NDEgNS4yNDggMTQuODA2IiBmaWxsPSIjMDBjMWQ1Ii8+PHBhdGggZD0iTTExLjQ1NiwxMS42di0uMDY0bTEuMDA1LTEuMjIxSDEyLjQzTTEwLjksMTIuMjM2aDB2MFptLjU1OC0uNjM2di0uMDY0IiBmaWxsPSJub25lIi8+PHBvbHlnb24gcG9pbnRzPSIxMy42OTEgOC40ODggMTMuMDM5IDguNDg4IDEyLjMgNS4yNSAxMi4zIDUuMjUgMTIuMTc2IDQuNzA4IDExLjY4NCA0LjQ3MSA4LjQxNiAyLjg5NyA3LjkyIDIuNjU4IDcuNDI0IDIuODk3IDQuMTU2IDQuNDcxIDMuNjYzIDQuNzA4IDMuNTQgNS4yNSAyLjczNCA4Ljc4MiAyLjYxMiA5LjMxNCAyLjk1OSA5Ljc0OSA1LjIxNiAxMi41NzkgNS41NTggMTMuMDA3IDcuOTgyIDEzLjAwNyA3Ljk4MiAxMy42NDMgNS4yNTIgMTMuNjQzIDQuOTEgMTMuMjE1IDIuMjczIDkuOTA3IDEuOTI0IDkuNDcxIDIuMDQ2IDguOTQxIDIuOTg4IDQuODExIDMuMTEyIDQuMjY5IDMuNjA0IDQuMDMyIDcuNDI0IDIuMTkyIDcuOTIgMS45NTMgOC40MTYgMi4xOTIgMTIuMjM2IDQuMDMyIDEyLjcyOCA0LjI2OSAxMi44NTIgNC44MTEgMTMuNjkxIDguNDg4IiBmaWxsPSIjMDA5MWRhIi8+PHBhdGggZD0iTTE0LjEwNywxMi4wNjRoLS41NTZ2LS43M2gtMi4xdi43M0g5LjE3NFYxNS4wNWg0LjYxN3YuNzNoMi4xVjEzLjY4NWgtMi4xdi43M0g5LjgwOVYxMi43aDEuNjQ3di43M2gyLjF2LS42MTloLS4wMDVsLjAwNS0uMDA3di0uMWgyLjMzNlY5LjY3OUgxMS4yNjl2LS43M2gtMi4xdjIuMWgyLjF2LS43MjloMy45ODJ2MS43NDlIMTQuMTQybS0zLjUwOC0xLjY1NUg5LjgwOVY5LjU4NGguODI1Wm0zLjc5MiwzLjkxMWguODI1di44MjVoLS44MjVaTTEwLjksMTIuMjM2aDBsMCwwWm0yLjAxNi41NTloLS44MjVWMTEuOTdoLjgyNVoiIGZpbGw9IiMxZDQyOGEiLz48cG9seWdvbiBwb2ludHM9IjEwLjkgMTIuMjMzIDEwLjkgMTIuMjM2IDEwLjg5OCAxMi4yMzYgMTAuOSAxMi4yMzMiIGZpbGw9IiMxZDQyOGEiLz48cGF0aCBkPSJNMTMuNTQ2LDEyLjgxMWguMDA1VjEyLjhaIiBmaWxsPSIjMWQ0MjhhIi8+PC9zdmc+
  tags:
    - java
    - spring-ai
    - spring-cli
    - RAG
    - LLM
    - GenAI

  options:

  - name: srcRepo
    label: Soure repository
    description: Codebase of an exiting 'inner loop' application
    defaultValue: "https://github.com/scottfrederick/spring-music"
    required: true
    defaultValue: "https://github.com/scottfrederick/spring-music"

  - name: llm
    label: LLM models selection
    required: true
    defaultValue: "platform"
    inputType: radio
    choices:
      - value: platform
        text: Use the chat and embeddings models as defined in the GenAI platform marketplace service
      - value: chatCustom
        text: Use custom chat model (manual configuration required)
      - value: embeddingCustom
        text: Use custom embedding model (manual configuration required)
  
  - name: addPrompt
    label: Use Spring AI to add prompt message retriever and context document
    inputType: checkbox
    dataType: boolean
    defaultValue: false
  - name: idkOptions
    label: Response behavior for unknown results 
    inputType: radio
    defaultValue: idk
    choices:
      - value: idk
        text: State you do not know
      - value: model
        text: Pass through model best guess reply
      - value: idkModel
        text: State you do not know AND pass through model best guess reply
    dependsOn:
      name: addPrompt
  - name: addDocuments
    label: Always add relevant documents at the end of the reply
    inputType: checkbox
    dataType: boolean
    defaultValue: false
    dependsOn:
      name: addPrompt

  - name: vectorStore
    label: Vector Store
    inputType: select
    display: true
    inputType: radio
    defaultValue: tpPGVector
    choices:
      - value: tpPGVector
        text: Tanzu PostgreSQL pgvector
      - value: tpGreenPlum
        text: Tanzu Greenplum + ML functionality 
      - value: external
        text: External VectorDB (manual configuration required)
   
  - name: autoConfigPGvector
    label: Use Spring AI to auto configure vector store initializer based on the PGVector instance binding
    inputType: checkbox
    dataType: boolean
    defaultValue: false
    dependsOn:
      name: vectorStore
      value: tpPGVector
  
  - name: runtime
    label: Runtime Configurations
    description: AI middleware capabilities
    required: true
    inputType: select
    display: true
    inputType: radio
    defaultValue: tpcf
    choices:
      - value: tpcf
        text: Cloud Foundry
      - value: tpk8s
        text: Kubernetes
  - name: apiGW
    label: API Gateway with tokens-based rate limiting support
    inputType: checkbox
    dataType: boolean
    defaultValue: false
  - name: observability
    label: Pre-wired application observability
    inputType: checkbox
    dataType: boolean
    defaultValue: true
  - name: fips
    label: FIPS compliance guardrails
    inputType: checkbox
    dataType: boolean
    defaultValue: false

engine:
  chain:
    - merge:
    #include runtime-configs per user selection
      - includes: ["**"]
        excludes: [ "runtime-configs/**"]
      - includes: [ "runtime-configs/tpk8s/*"]
        condition: "#runtime == 'tpk8s'"
      - includes: [ "runtime-configs/tpcf/*"]
        condition: "#runtime == 'tpcf'"
      - includes: [ "runtime-configs/**"]
        condition: "#runtime == 'all'"
      
